<!doctype html>
<li><a href="about.html">About</a></li>
</ul>
</nav>
<div class="header-actions"><a class="btn ghost" href="admin.html">Admin</a><button id="navToggle" class="nav-toggle" aria-expanded="false" aria-controls="navList" aria-label="Toggle navigation">☰</button></div>
</div>
</header>


<main class="container single-container">
<article class="single-post" id="singlePost"></article>


<aside class="sidebar" id="sidebar">
<div class="widget">
<h3>Shop this blend</h3>
<p id="shopBox">Loading...</p>
</div>


<div class="widget">
<h3>Popular posts</h3>
<ul class="widget-list" id="popularList"></ul>
</div>
</aside>
</main>


<footer class="site-footer">
<div class="container footer-inner">
<p>&copy; <span id="year"></span> Oils of BaNTU</p>
</div>
</footer>


<script src="script.js"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
const params = new URLSearchParams(location.search);
const id = params.get('post');
const post = window.oilsBantu?.getPostById(id || '');
const container = document.getElementById('singlePost');
if (!post) {
container.innerHTML = '<h1>Post not found</h1><p>The post you are looking for does not exist.</p>';
return;
}


container.innerHTML = `\n <header class="post-header">\n <h1>${escapeHtml(post.title)}</h1>\n <div class="post-meta">By Oils of BaNTU • <time datetime="${post.date}">${formatDate(post.date)}</time></div>\n <img class="post-feature" src="${post.image||'assets/images/product1.jpg'}" alt="${escapeHtml(post.title)}">\n </header>\n <div class="post-content">\n <p>${escapeHtml(post.content || post.excerpt || '')}</p>\n </div>\n `;


const shopBox = document.getElementById('shopBox');
shopBox.innerHTML = `<strong>${escapeHtml(post.title)}</strong><br>${escapeHtml(post.price || 'Price on request')} <br><a href="#" class="btn small">Buy</a>`;


const pop = window.oilsBantu.loadStoredPosts().slice(0,5);
const list = document.getElementById('popularList');
list.innerHTML = '';
pop.forEach(p => {
const li = document.createElement('li');
li.innerHTML = `<a href="post.html?post=${encodeURIComponent(p.id)}">${escapeHtml(p.title)}</a>`;
list.appendChild(li);
});


document.getElementById('year').textContent = new Date().getFullYear();
});


function escapeHtml(s=''){ return (s+'').replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }
function formatDate(d){ const dt=new Date(d); if (isNaN(dt)) return d; return dt.toLocaleDateString(undefined,{year:'numeric',month:'short',day:'numeric'}); }
</script>
</body>
</html>
